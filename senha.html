<!DOCTYPE html>
<html>
<head>
  <title>Teste de Conexão com API do Facebook</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .success-message {
      color: green;
      font-weight: bold;
      padding: 10px;
      background-color: #e8f5e9;
      border-radius: 5px;
    }
    .error-message {
      color: red;
      font-weight: bold;
      padding: 10px;
      background-color: #ffebee;
      border-radius: 5px;
    }
    button {
      background-color: #4267B2;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
    #response-container {
      margin-top: 20px;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 5px;
      max-height: 300px;
      overflow-y: auto;
      background-color: #f9f9f9;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <h1>Teste de Conexão com API do Facebook</h1>
  
  <form id="teste-form">
    <button type="submit" id="test-button">Testar Conexão</button>
  </form>
  
  <div id="message"></div>
  
  <div id="response-container" style="display:none;">
    <h3>Resposta da API:</h3>
    <pre id="response-data"></pre>
  </div>
  
  <script>
    // Configurações do app
    const appId = '1211147243746599';
    const token = 'EAARNiDE79ScBOwk14kwNDF467SWyf3WK73ZBVs266Rwe7x3s7C4deBL4aEf98ENmO0sNeUUVqErlY4mEDWSxPLou6geXxGJOCpIbpbi1DMlZAn66ffuGVVhCC9iaciW78oc8nBxPwYmz2g0OnNn3bhANM3280xTYIAzCNU6J26GtXN6tfZBv1ZBJiZCOLomz79ZApu8lZC9jj4CPVNUJIuOHaq6jFUQMp0wPLZCGyEoN6oHgYuLUsWl0zrqE0xDINZB0dM4wTZBgZDZD';
    
    // Elementos do DOM
    const form = document.getElementById('teste-form');
    const messageDiv = document.getElementById('message');
    const responseContainer = document.getElementById('response-container');
    const responseData = document.getElementById('response-data');
    const testButton = document.getElementById('test-button');
    
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Limpa mensagens anteriores
      messageDiv.innerHTML = '';
      responseData.innerHTML = '';
      responseContainer.style.display = 'none';
      
      // Indica que está carregando
      testButton.disabled = true;
      testButton.textContent = 'Testando...';
      
      try {
        // Testa a conexão obtendo informações do app
        const response = await fetch(`https://graph.facebook.com/v22.0/${appId}?fields=name,id&access_token=${token}`, {
          method: 'GET'
        });
        
        const result = await response.json();
        
        // Mostra resposta completa
        responseData.textContent = JSON.stringify(result, null, 2);
        responseContainer.style.display = 'block';
        
        if (response.ok) {
          // Conexão bem sucedida
          messageDiv.innerHTML = `<p class="success-message">Conexão estabelecida com sucesso! App: ${result.name || 'Não identificado'}</p>`;
          console.log('Teste bem sucedido:', result);
        } else {
          // Erro na API
          messageDiv.innerHTML = `<p class="error-message">Erro na conexão: ${result.error ? result.error.message : 'Resposta inválida'}</p>`;
          console.error('Erro na API:', result);
        }
      } catch (error) {
        // Erro de rede ou outro
        console.error('Erro:', error);
        messageDiv.innerHTML = `<p class="error-message">Erro ao testar conexão: ${error.message}</p>`;
        responseData.textContent = error.toString();
        responseContainer.style.display = 'block';
      } finally {
        // Restaura o botão
        testButton.disabled = false;
        testButton.textContent = 'Testar Conexão';
      }
    });
  </script>
</body>
</html>
